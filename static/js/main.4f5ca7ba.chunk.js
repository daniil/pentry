(this["webpackJsonppantry-test"]=this["webpackJsonppantry-test"]||[]).push([[0],{139:function(e,t,n){e.exports=n(287)},144:function(e,t,n){},149:function(e,t){},151:function(e,t){},162:function(e,t){},164:function(e,t){},189:function(e,t){},191:function(e,t){},192:function(e,t){},198:function(e,t){},200:function(e,t){},218:function(e,t){},221:function(e,t){},237:function(e,t){},240:function(e,t){},287:function(e,t,n){"use strict";n.r(t);var a,r=n(0),l=n.n(r),i=n(136),c=n.n(i),u=(n(144),n(4)),o=n(5),s=n(7),d=n(6),h=n(28),p=n(8),m=n(13),f=n(20),v=n(52),E=n.n(v),g=n(25),b=n.n(g),k=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.handleInputChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),b.a.get("".concat(B,"/basket/").concat(e.state.username)).then((function(t){E.a.compare(e.state.password,t.data.password,(function(n,a){if(!a)throw new Error("Username and password dont match");e.props.handleLogin(t.data.username)}))}),(function(){return console.log("Please signup, user cant be found")})).catch((function(e){return console.log(e)}))},e}return Object(o.a)(n,[{key:"render",value:function(){return l.a.createElement("form",null,l.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:this.handleInputChange,value:this.state.username}),l.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:this.handleInputChange,value:this.state.password}),l.a.createElement("button",{onClick:this.handleSubmit},"Login"))}}]),n}(r.Component),y=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",passwordRepeat:"",validationMessage:""},e.handleInputChange=function(t){var n;e.setState((n={},Object(f.a)(n,t.target.name,t.target.value),Object(f.a)(n,"validationMessage",""),n))},e.handleSubmit=function(t){t.preventDefault(),e.state.password===e.state.passwordRepeat?b.a.get("".concat(B,"/basket/").concat(e.state.username)).then((function(){return e.setState({validationMessage:"This username already exists, please pick another"})}),(function(){return e.createUser()})):e.setState({validationMessage:"Your passwords do not match"})},e.createUser=function(){E.a.hash(e.state.password,10,(function(t,n){b.a.post("".concat(B,"/basket/").concat(e.state.username),{username:e.state.username,password:n,inks:[],pens:[],inkedPens:[]}).then((function(){return e.props.handleLogin(e.state.username)}))}))},e}return Object(o.a)(n,[{key:"render",value:function(){return l.a.createElement("form",null,l.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:this.handleInputChange,value:this.state.username}),l.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:this.handleInputChange,value:this.state.password}),l.a.createElement("input",{type:"password",name:"passwordRepeat",placeholder:"Repeat Password",onChange:this.handleInputChange,value:this.state.passwordRepeat}),l.a.createElement("button",{onClick:this.handleSubmit},"Signup"),l.a.createElement("p",null,this.state.validationMessage))}}]),n}(r.Component),C=n(137),I=n.n(C),O=function(){return a||(a=new I.a(J)),!0},j=function(e){return O()&&a.encrypt(e)},S=function(e){try{return O()&&a.decrypt(e)}catch(t){return!1}},w=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleLogin=function(t){localStorage.setItem("pentry",JSON.stringify({token:j(t)})),e.checkUserLoggedIn()},e.checkUserLoggedIn=function(){JSON.parse(localStorage.getItem("pentry"))&&e.props.history.push("/my")},e.handleSignup=function(){e.props.history.push("/")},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.checkUserLoggedIn()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k,{handleLogin:this.handleLogin}),"- or -",l.a.createElement(y,{handleLogin:this.handleLogin}))}}]),n}(r.Component),P=n(45),N=n(53),A={brand:"",inkName:"",colorName:"",type:"",size:"",hue:"",props:"",dateAcquired:""},D=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state=A,e.handleInputChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.handleSubmit(e.state),e.setState(A)},e}return Object(o.a)(n,[{key:"render",value:function(){return l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"brand",placeholder:"Brand",onChange:this.handleInputChange,value:this.state.brand})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"inkName",placeholder:"Ink Name",onChange:this.handleInputChange,value:this.state.inkName})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"colorName",placeholder:"Color Name",onChange:this.handleInputChange,value:this.state.colorName})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"type",placeholder:"Type",onChange:this.handleInputChange,value:this.state.type})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"size",placeholder:"Size",onChange:this.handleInputChange,value:this.state.size})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"hue",placeholder:"Hue",onChange:this.handleInputChange,value:this.state.hue})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"props",placeholder:"Properties",onChange:this.handleInputChange,value:this.state.props})),l.a.createElement("div",null,l.a.createElement("input",{type:"date",name:"dateAcquired",placeholder:"Date Acquired",onChange:this.handleInputChange,value:this.state.dateAcquired})),l.a.createElement("button",{onClick:this.handleSubmit},"Add"))}}]),n}(r.Component),x=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"My Inks"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(D,{handleSubmit:this.props.handleSubmit})),l.a.createElement("li",null,l.a.createElement("div",null,"Brand"),l.a.createElement("div",null,"Ink Name"),l.a.createElement("div",null,"Color Name"),l.a.createElement("div",null,"Type"),l.a.createElement("div",null,"Size"),l.a.createElement("div",null,"Hue"),l.a.createElement("div",null,"Properties"),l.a.createElement("div",null,"Date Acquired")),this.props.inks.map((function(e){return l.a.createElement("li",{key:e.id},l.a.createElement("div",null,e.brand),l.a.createElement("div",null,e.inkName),l.a.createElement("div",null,e.colorName),l.a.createElement("div",null,e.type),l.a.createElement("div",null,e.size),l.a.createElement("div",null,e.hue),l.a.createElement("div",null,e.props),l.a.createElement("div",null,e.dateAcquired))}))))}}]),n}(r.Component),T={brand:"",model:"",finishName:"",nibType:"",nibSize:"",dateAcquired:""},L=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state=T,e.handleInputChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.handleSubmit(e.state),e.setState(T)},e}return Object(o.a)(n,[{key:"render",value:function(){return l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"brand",placeholder:"Brand",onChange:this.handleInputChange,value:this.state.brand})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"model",placeholder:"Model Name",onChange:this.handleInputChange,value:this.state.model})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"finishName",placeholder:"Finish Name",onChange:this.handleInputChange,value:this.state.finishName})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"nibType",placeholder:"Nib Type",onChange:this.handleInputChange,value:this.state.nibType})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"nibSize",placeholder:"Nib Size",onChange:this.handleInputChange,value:this.state.nibSize})),l.a.createElement("div",null,l.a.createElement("input",{type:"date",name:"dateAcquired",placeholder:"Date Acquired",onChange:this.handleInputChange,value:this.state.dateAcquired})),l.a.createElement("button",{onClick:this.handleSubmit},"Add"))}}]),n}(r.Component),q=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).checkPenInked=function(t){var n=e.props.inkedPens.filter((function(e){return e.penId===t.id}));return!!n.length&&(!(n.length&&!n[n.length-1].isActive)&&n[n.length-1])},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"My Pens"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(L,{handleSubmit:this.props.handleSubmit})),l.a.createElement("li",null,l.a.createElement("div",null,"Brand"),l.a.createElement("div",null,"Model"),l.a.createElement("div",null,"Finish Name"),l.a.createElement("div",null,"Nib Type"),l.a.createElement("div",null,"Nib Size"),l.a.createElement("div",null,"Date Acquired")),this.props.pens.map((function(t){var n=e.checkPenInked(t);return l.a.createElement("li",{key:t.id},l.a.createElement("div",null,t.brand),l.a.createElement("div",null,t.model),l.a.createElement("div",null,t.finishName),l.a.createElement("div",null,t.nibType),l.a.createElement("div",null,t.nibSize),l.a.createElement("div",null,t.dateAcquired),!n&&l.a.createElement("button",{onClick:function(){return e.props.handlePenInking(t)}},"Ink This Pen"),n&&l.a.createElement("button",{onClick:function(){return e.props.handlePenCleaning(n)}},"Clean This Pen"))}))))}}]),n}(r.Component),z=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={inkChoice:""},e.handleInkChange=function(t){e.setState({inkChoice:t.target.value})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props.pen,n=t.brand,a=t.model;return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,n," ",a),l.a.createElement("select",{onChange:this.handleInkChange,value:this.state.inkChoice},l.a.createElement("option",{value:""}),this.props.inks.map((function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.brand," ",e.inkName," ",e.colorName)}))),l.a.createElement("button",{onClick:function(){return e.props.handleInkChoice(e.props.pen.id,e.state.inkChoice)}},"Use This Ink"))}}]),n}(r.Component),M=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getCurrentlyInked=function(){var t=e.props.inkedPens,n=t.filter((function(e){return!e.isActive})).map((function(e){return e.id}));return t.filter((function(e){return!n.includes(e.id)}))},e.renderPen=function(t){var n=e.props.pens.find((function(e){return e.id===t}));return l.a.createElement(l.a.Fragment,null,n.brand," ",n.model," ",n.finishName)},e.renderInk=function(t){var n=e.props.inks.find((function(e){return e.id===t}));return l.a.createElement(l.a.Fragment,null,n.brand," ",n.inkName," ",n.colorName)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.getCurrentlyInked();return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Inked Pens"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("div",null,"Pen"),l.a.createElement("div",null,"Ink"),l.a.createElement("div",null,"Inked Since")),t.map((function(t){return l.a.createElement("li",{key:t.id},l.a.createElement("div",null,e.renderPen(t.penId)),l.a.createElement("div",null,e.renderInk(t.inkId)),l.a.createElement("div",null,t.dateInked))}))))}}]),n}(r.Component),U=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={userToken:JSON.parse(localStorage.getItem("pentry")),username:"",inks:[],pens:[],inkedPens:[],inkPen:null},e.validateUser=function(){var t=S(e.state.userToken.token);if(!t)return e.handleLogout();e.setState({username:t},e.refreshData)},e.handleLogout=function(){localStorage.removeItem("pentry"),e.props.history.push("/")},e.handleInkSubmit=function(t){e.updateData({inks:[Object(P.a)({id:Object(N.a)(),dateAdded:Date.now()},t)]})},e.handlePenSubmit=function(t){e.updateData({pens:[Object(P.a)({id:Object(N.a)(),dateAdded:Date.now()},t)]})},e.handlePenInking=function(t){e.setState({inkPen:t})},e.handleInkChoice=function(t,n){e.updateData({inkedPens:[{id:Object(N.a)(),dateInked:Date.now(),penId:t,inkId:n,isActive:!0}]}),e.setState({inkPen:null})},e.handlePenCleaning=function(t){e.updateData({inkedPens:[Object(P.a)(Object(P.a)({},t),{},{isActive:!1,dateCleaned:Date.now()})]})},e.updateData=function(t){b()({url:"".concat(B,"/basket/").concat(e.state.username),method:"PUT",data:t}).then((function(){return e.refreshData()}))},e.refreshData=function(){b.a.get("".concat(B,"/basket/").concat(e.state.username)).then((function(t){return e.setState({inks:t.data.inks,pens:t.data.pens,inkedPens:t.data.inkedPens})}))},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.state.userToken?this.validateUser():this.props.history.push("/")}},{key:"render",value:function(){var e=this,t=this.props.match.path;return this.state.userToken?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Welcome,\xa0",l.a.createElement("strong",null,this.state.username),"\xa0 (",l.a.createElement(h.b,{to:"/",onClick:this.handleLogout},"logout"),")"),l.a.createElement(h.b,{to:"".concat(t)},l.a.createElement("h1",null,"Pentry")),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(h.b,{to:"".concat(t,"/inks")},"Inks")),l.a.createElement("li",null,l.a.createElement(h.b,{to:"".concat(t,"/pens")},"Pens"))),l.a.createElement(p.c,null,l.a.createElement(p.a,{path:"".concat(t),exact:!0,render:function(t){return l.a.createElement(M,Object.assign({inks:e.state.inks,pens:e.state.pens,inkedPens:e.state.inkedPens},t))}}),l.a.createElement(p.a,{path:"".concat(t,"/inks"),render:function(t){return l.a.createElement(x,Object.assign({inks:e.state.inks,handleSubmit:e.handleInkSubmit},t))}}),l.a.createElement(p.a,{path:"".concat(t,"/pens"),render:function(t){return l.a.createElement(q,Object.assign({pens:e.state.pens,inkedPens:e.state.inkedPens,handleSubmit:e.handlePenSubmit,handlePenInking:e.handlePenInking,handlePenCleaning:e.handlePenCleaning},t))}})),this.state.inkPen&&l.a.createElement(z,{pen:this.state.inkPen,inks:this.state.inks,handleInkChoice:this.handleInkChoice})):null}}]),n}(r.Component),F=Object(m.a)(),B="https://getpantry.cloud/apiv1/pantry/b16a54dc-a92c-45bb-9c52-d1a485046a8f",J="9b7f571bf6f53e296741ca266f66dc235a14f739b217a6e7f0688f2d44588a10a070c7714c0d3847a009de8284d397d8",R=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return l.a.createElement(h.a,{history:F,basename:"/pentry/"},l.a.createElement(p.c,null,l.a.createElement(p.a,{path:"/",exact:!0,component:w}),l.a.createElement(p.a,{path:"/my",component:U})))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[139,1,2]]]);
//# sourceMappingURL=main.4f5ca7ba.chunk.js.map