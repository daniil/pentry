(this["webpackJsonppantry-test"]=this["webpackJsonppantry-test"]||[]).push([[0],{35:function(e,t,n){e.exports=n(61)},61:function(e,t,n){"use strict";n.r(t);var a,l,i,r=n(0),c=n.n(r),u=n(33),s=n.n(u),o=n(2),d=n(3),h=n(5),m=n(4),p=n(18),f=n(6),v=n(9),b=n.n(v),E=n(11),k=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state={email:"",password:"",validationMessage:""},e.handleInputChange=function(t){e.setState(Object(E.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),b.a.auth().setPersistence(b.a.auth.Auth.Persistence.LOCAL).then((function(){b.a.auth().signInWithEmailAndPassword(e.state.email,e.state.password).catch((function(t){return e.setState({validationMessage:t.message})}))}))},e}return Object(d.a)(n,[{key:"render",value:function(){return c.a.createElement("form",null,c.a.createElement("input",{type:"text",name:"email",placeholder:"Email",onChange:this.handleInputChange,value:this.state.email}),c.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:this.handleInputChange,value:this.state.password}),c.a.createElement("button",{onClick:this.handleSubmit},"Login"),c.a.createElement("p",null,this.state.validationMessage))}}]),n}(r.Component),g=n(21),y=n.n(g),I=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state={email:"",password:"",passwordRepeat:"",validationMessage:""},e.db=y.a.firestore(),e.handleInputChange=function(t){var n;e.setState((n={},Object(E.a)(n,t.target.name,t.target.value),Object(E.a)(n,"validationMessage",""),n))},e.handleSubmit=function(t){t.preventDefault(),e.state.password===e.state.passwordRepeat?y.a.auth().setPersistence(y.a.auth.Auth.Persistence.LOCAL).then((function(){y.a.auth().createUserWithEmailAndPassword(e.state.email,e.state.password).then((function(t){e.db.collection("users").doc(t.user.uid).set({email:t.user.email})})).catch((function(t){e.setState({validationMessage:t.message})}))})):e.setState({validationMessage:"Your passwords do not match"})},e}return Object(d.a)(n,[{key:"render",value:function(){return c.a.createElement("form",null,c.a.createElement("input",{type:"text",name:"email",placeholder:"Email",onChange:this.handleInputChange,value:this.state.email}),c.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:this.handleInputChange,value:this.state.password}),c.a.createElement("input",{type:"password",name:"passwordRepeat",placeholder:"Repeat Password",onChange:this.handleInputChange,value:this.state.passwordRepeat}),c.a.createElement("button",{onClick:this.handleSubmit},"Signup"),c.a.createElement("p",null,this.state.validationMessage))}}]),n}(r.Component),C=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.firebaseListener=b.a.auth().onAuthStateChanged((function(t){t?e.props.history.push("/my"):e.props.history.push("/")}))}},{key:"componentWillUnmount",value:function(){this.firebaseListener&&this.firebaseListener(),this.firebaseListener=null}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,null),"- or -",c.a.createElement(I,null))}}]),n}(r.Component),P=n(24),S=n(65),O=function(e){return Object(S.a)(new Date(1e3*e),"yyyy-MM-dd")},j=function(e){return b.a.firestore.Timestamp.fromDate(new Date(e))},A=function(){return b.a.firestore.FieldValue.serverTimestamp()},w={id:null,brand:"",inkName:"",colorName:"",type:"",size:"",hue:"",props:"",dateAcquired:""},N=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state=w,e.handleInputChange=function(t){e.setState(Object(E.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.handleSubmit(e.cleanSubmitData(),!!e.props.selectedInk),e.setState(w)},e.newInkDataPassed=function(t){return e.props.selectedInk&&(!t.selectedInk||t.selectedInk.id!==e.props.selectedInk.id)},e.cleanSubmitData=function(){if(e.state.id)return e.state;var t=e.state;t.id;return Object(P.a)(t,["id"])},e}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(e){if(this.newInkDataPassed(e)){var t=this.props.selectedInk,n=t.id,a=t.brand,l=t.inkName,i=t.colorName,r=t.type,c=t.size,u=t.hue,s=t.props,o=t.dateAcquired;this.setState({id:n,brand:a,inkName:l,colorName:i,type:r,size:c,hue:u,props:s,dateAcquired:O(o.seconds)})}}},{key:"render",value:function(){return c.a.createElement("form",null,c.a.createElement("div",null,c.a.createElement("input",{type:"text",name:"brand",placeholder:"Brand",onChange:this.handleInputChange,value:this.state.brand})),c.a.createElement("div",null,c.a.createElement("input",{type:"text",name:"inkName",placeholder:"Ink Name",onChange:this.handleInputChange,value:this.state.inkName})),c.a.createElement("div",null,c.a.createElement("input",{type:"text",name:"colorName",placeholder:"Color Name",onChange:this.handleInputChange,value:this.state.colorName})),c.a.createElement("div",null,c.a.createElement("input",{type:"text",name:"type",placeholder:"Type",onChange:this.handleInputChange,value:this.state.type})),c.a.createElement("div",null,c.a.createElement("input",{type:"text",name:"size",placeholder:"Size",onChange:this.handleInputChange,value:this.state.size})),c.a.createElement("div",null,c.a.createElement("input",{type:"text",name:"hue",placeholder:"Hue",onChange:this.handleInputChange,value:this.state.hue})),c.a.createElement("div",null,c.a.createElement("input",{type:"text",name:"props",placeholder:"Properties",onChange:this.handleInputChange,value:this.state.props})),c.a.createElement("div",null,c.a.createElement("input",{type:"date",name:"dateAcquired",placeholder:"Date Acquired",onChange:this.handleInputChange,value:this.state.dateAcquired})),c.a.createElement("button",{onClick:this.handleSubmit},this.props.selectedInk?"Update":"Add"))}}]),n}(r.Component),q=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state={selectedInk:null},e.handleInkSelect=function(t){e.setState({selectedInk:t})},e.handleSubmit=function(t,n){n&&e.setState({selectedInk:null}),e.props.handleSubmit(t,n)},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.inks,a=t.handleRemove,l=n.filter((function(e){return e.isActive}));return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"My Inks"),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(N,{selectedInk:this.state.selectedInk,handleSubmit:this.handleSubmit})),c.a.createElement("li",null,c.a.createElement("div",null,"Brand"),c.a.createElement("div",null,"Ink Name"),c.a.createElement("div",null,"Color Name"),c.a.createElement("div",null,"Type"),c.a.createElement("div",null,"Size"),c.a.createElement("div",null,"Hue"),c.a.createElement("div",null,"Properties"),c.a.createElement("div",null,"Date Acquired")),l.map((function(t){return c.a.createElement("li",{key:t.id},c.a.createElement("div",null,t.brand),c.a.createElement("div",null,t.inkName),c.a.createElement("div",null,t.colorName),c.a.createElement("div",null,t.type),c.a.createElement("div",null,t.size),c.a.createElement("div",null,t.hue),c.a.createElement("div",null,t.props),c.a.createElement("div",null,O(t.dateAcquired.seconds)),c.a.createElement("button",{onClick:function(){return e.handleInkSelect(t)}},"Edit"),c.a.createElement("button",{onClick:function(){return a(t.id)}},"Remove"))}))))}}]),n}(r.Component),D={id:null,brand:"",model:"",finishName:"",nibType:"",nibSize:"",dateAcquired:""},T=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state=D,e.handleInputChange=function(t){e.setState(Object(E.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.handleSubmit(e.cleanSubmitData(),!!e.props.selectedPen),e.setState(D)},e.newPenDataPassed=function(t){return e.props.selectedPen&&(!t.selectedPen||t.selectedPen.id!==e.props.selectedPen.id)},e.cleanSubmitData=function(){if(e.state.id)return e.state;var t=e.state;t.id;return Object(P.a)(t,["id"])},e}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(e){if(this.newPenDataPassed(e)){var t=this.props.selectedPen,n=t.id,a=t.brand,l=t.model,i=t.finishName,r=t.nibType,c=t.nibSize,u=t.dateAcquired;this.setState({id:n,brand:a,model:l,finishName:i,nibType:r,nibSize:c,dateAcquired:O(u.seconds)})}}},{key:"render",value:function(){return c.a.createElement("form",null,c.a.createElement("div",null,c.a.createElement("input",{type:"text",name:"brand",placeholder:"Brand",onChange:this.handleInputChange,value:this.state.brand})),c.a.createElement("div",null,c.a.createElement("input",{type:"text",name:"model",placeholder:"Model Name",onChange:this.handleInputChange,value:this.state.model})),c.a.createElement("div",null,c.a.createElement("input",{type:"text",name:"finishName",placeholder:"Finish Name",onChange:this.handleInputChange,value:this.state.finishName})),c.a.createElement("div",null,c.a.createElement("input",{type:"text",name:"nibType",placeholder:"Nib Type",onChange:this.handleInputChange,value:this.state.nibType})),c.a.createElement("div",null,c.a.createElement("input",{type:"text",name:"nibSize",placeholder:"Nib Size",onChange:this.handleInputChange,value:this.state.nibSize})),c.a.createElement("div",null,c.a.createElement("input",{type:"date",name:"dateAcquired",placeholder:"Date Acquired",onChange:this.handleInputChange,value:this.state.dateAcquired})),c.a.createElement("button",{onClick:this.handleSubmit},this.props.selectedPen?"Update":"Add"))}}]),n}(r.Component),z=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state={selectedPen:null},e.handlePenSelect=function(t){e.setState({selectedPen:t})},e.handleSubmit=function(t,n){n&&e.setState({selectedPen:null}),e.props.handleSubmit(t,n)},e.checkPenInked=function(t){return e.props.inkedPens.find((function(e){return e.penId===t.id&&e.isActive}))},e.displayInk=function(t){var n=e.props.inks.find((function(e){return e.id===t.inkId}));return"".concat(n.brand," ").concat(n.inkName," ").concat(n.colorName," ").concat(!n.isActive&&"(retired)")},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.pens,a=t.handleSubmit,l=t.handleRemove,i=t.handleInking,r=t.handleCleaning,u=n.filter((function(e){return e.isActive}));return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"My Pens"),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(T,{selectedPen:this.state.selectedPen,handleSubmit:a})),c.a.createElement("li",null,c.a.createElement("div",null,"Brand"),c.a.createElement("div",null,"Model"),c.a.createElement("div",null,"Finish Name"),c.a.createElement("div",null,"Nib Type"),c.a.createElement("div",null,"Nib Size"),c.a.createElement("div",null,"Date Acquired"),c.a.createElement("div",null,"Inked With")),u.map((function(t){var n=e.checkPenInked(t);return c.a.createElement("li",{key:t.id},c.a.createElement("div",null,t.brand),c.a.createElement("div",null,t.model),c.a.createElement("div",null,t.finishName),c.a.createElement("div",null,t.nibType),c.a.createElement("div",null,t.nibSize),c.a.createElement("div",null,O(t.dateAcquired.seconds)),c.a.createElement("button",{onClick:function(){return e.handlePenSelect(t)}},"Edit"),c.a.createElement("button",{onClick:function(){return l(t.id)}},"Remove"),!n&&c.a.createElement("button",{onClick:function(){return i(t)}},"Ink This Pen"),n&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,e.displayInk(n)),c.a.createElement("button",{onClick:function(){return r(n)}},"Clean This Pen")))}))))}}]),n}(r.Component),x=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state={inkChoice:""},e.handleInkChange=function(t){e.setState({inkChoice:t.target.value})},e.inkUseCount=function(t){return e.props.inkedPens.filter((function(e){return e.isActive&&e.inkId===t.id})).length},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.pen,a=n.brand,l=n.model,i=t.inks,r=t.handleInkChoice;return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,a," ",l),c.a.createElement("select",{onChange:this.handleInkChange,value:this.state.inkChoice},c.a.createElement("option",{value:""}),i.map((function(t){var n=e.inkUseCount(t);return c.a.createElement("option",{key:t.id,value:t.id},t.brand," ",t.inkName," ",t.colorName,!!n&&"(".concat(n,")"))}))),c.a.createElement("button",{onClick:function(){return r(e.props.pen.id,e.state.inkChoice)}},"Use This Ink"))}}]),n}(r.Component),M=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).getCurrentlyInked=function(){return e.props.inkedPens.filter((function(e){return e.isActive}))},e.renderPen=function(t){var n=e.props.pens.find((function(e){return e.id===t}));return c.a.createElement(c.a.Fragment,null,n.brand," ",n.model," ",n.finishName)},e.renderInk=function(t){var n=e.props.inks.find((function(e){return e.id===t}));return c.a.createElement(c.a.Fragment,null,n.brand," ",n.inkName," ",n.colorName)},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.getCurrentlyInked();return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Inked Pens"),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("div",null,"Pen"),c.a.createElement("div",null,"Ink"),c.a.createElement("div",null,"Inked Since")),t.map((function(t){return c.a.createElement("li",{key:t.id},c.a.createElement("div",null,e.renderPen(t.penId)),c.a.createElement("div",null,e.renderInk(t.inkId)),c.a.createElement("div",null,O(t.dateInked.seconds)))}))))}}]),n}(r.Component),R=n(15),L=(n(54),n(55),n(56),{apiKey:"AIzaSyA2jhn64ILvx4B9zL3ZNRLV9gh4I8Xeo24",authDomain:"pentry-3732e.firebaseapp.com",databaseURL:"https://pentry-3732e.firebaseio.com",projectId:"pentry-3732e",storageBucket:"pentry-3732e.appspot.com",messagingSenderId:"988072030575",appId:"1:988072030575:web:5b3bc8a425a47f0a33789a",measurementId:"G-6MKHZT1XNJ"}),U=function(e){return a.collection("users").doc(e).collection("inks")},F=function(e){return a.collection("users").doc(e).collection("pens")},B=function(e){return a.collection("users").doc(e).collection("inkedPens")},W=function(){!b.a.apps.length&&b.a.initializeApp(L),a=b.a.firestore()},H=function(){return new Promise((function(e,t){l=b.a.auth().onAuthStateChanged((function(n){n?e(n):t()}))}))},J=function(){l&&l(),l=null},K=function(e,t){i=["inks","pens","inkedPens"].map((function(n){return a.collection("users").doc(e).collection(n).onSnapshot((function(e){var a=[];e.forEach((function(e){return a.push(Object(R.a)({id:e.id},e.data()))})),t(Object(E.a)({},n,a))}))}))},V=function(){i&&i.map((function(e){return e()})),i=null},X=function(e,t){U(e).add(Object(R.a)(Object(R.a)({},t),{},{dateAcquired:j(t.dateAcquired),addedTimestamp:A(),isActive:!0}))},Z=function(e,t){U(e).doc(t.id).update(Object(R.a)(Object(R.a)({},t),{},{dateAcquired:j(t.dateAcquired),updatedTimestamp:A()}))},G=function(e,t){U(e).doc(t).update({isActive:!1,removedTimestamp:A()})},Y=function(e,t){F(e).add(Object(R.a)(Object(R.a)({},t),{},{dateAcquired:j(t.dateAcquired),addedTimestamp:A(),isActive:!0}))},Q=function(e,t){F(e).doc(t.id).update(Object(R.a)(Object(R.a)({},t),{},{dateAcquired:j(t.dateAcquired),updatedTimestamp:A()}))},$=function(e,t){F(e).doc(t).update({isActive:!1,removedTimestamp:A()})},_=function(e,t,n){return new Promise((function(a){B(e).add({penId:t,inkId:n,dateInked:A(),isActive:!0}),a()}))},ee=function(e,t){B(e).doc(t).update({isActive:!1,dateCleaned:A()})},te=function(){b.a.auth().signOut()},ne=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state={user:null,inks:[],pens:[],inkedPens:[],inkPen:null},e.userId=function(){return e.state.user.uid},e.initUserPentry=function(t){e.setState({user:t},(function(){return K(e.userId(),(function(t){return e.setState(t)}))}))},e.handleLogout=function(){te()},e.handleInkSubmit=function(t,n){n?Z(e.userId(),t):X(e.userId(),t)},e.handleInkRemove=function(t){G(e.userId(),t)},e.handlePenSubmit=function(t,n){n?Q(e.userId(),t):Y(e.userId(),t)},e.handlePenRemove=function(t){$(e.userId(),t)},e.handlePenInking=function(t){e.setState({inkPen:t})},e.handleInkChoice=function(t,n){_(e.userId(),t,n).then((function(){return e.setState({inkPen:null})}))},e.handlePenCleaning=function(t){ee(e.userId(),t.id)},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;H().then(this.initUserPentry,(function(){return e.props.history.push("/")}))}},{key:"componentWillUnmount",value:function(){J(),V()}},{key:"render",value:function(){var e=this,t=this.props.match.path;return this.state.user?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Welcome,\xa0",c.a.createElement("strong",null,this.state.user.email),"\xa0 (",c.a.createElement(p.b,{to:"/",onClick:this.handleLogout},"logout"),")"),c.a.createElement(p.b,{to:"".concat(t)},c.a.createElement("h1",null,"Pentry")),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(p.b,{to:"".concat(t,"/inks")},"Inks")),c.a.createElement("li",null,c.a.createElement(p.b,{to:"".concat(t,"/pens")},"Pens"))),c.a.createElement(f.c,null,c.a.createElement(f.a,{path:"".concat(t),exact:!0,render:function(t){return c.a.createElement(M,Object.assign({inks:e.state.inks,pens:e.state.pens,inkedPens:e.state.inkedPens},t))}}),c.a.createElement(f.a,{path:"".concat(t,"/inks"),render:function(t){return c.a.createElement(q,Object.assign({inks:e.state.inks,handleSubmit:e.handleInkSubmit,handleRemove:e.handleInkRemove},t))}}),c.a.createElement(f.a,{path:"".concat(t,"/pens"),render:function(t){return c.a.createElement(z,Object.assign({pens:e.state.pens,inks:e.state.inks,inkedPens:e.state.inkedPens,handleSubmit:e.handlePenSubmit,handleRemove:e.handlePenRemove,handleInking:e.handlePenInking,handleCleaning:e.handlePenCleaning},t))}})),this.state.inkPen&&c.a.createElement(x,{pen:this.state.inkPen,inks:this.state.inks,inkedPens:this.state.inkedPens,handleInkChoice:this.handleInkChoice})):null}}]),n}(r.Component),ae=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(o.a)(this,n),e=t.call(this),W(),e}return Object(d.a)(n,[{key:"render",value:function(){return c.a.createElement(p.a,{basename:"/pentry/"},c.a.createElement(f.c,null,c.a.createElement(f.a,{path:"/",exact:!0,component:C}),c.a.createElement(f.a,{path:"/my",component:ne})))}}]),n}(r.Component);s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(ae,null)),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.6536e17c.chunk.js.map