(this["webpackJsonppantry-test"]=this["webpackJsonppantry-test"]||[]).push([[0],{34:function(e,t,n){e.exports=n(60)},60:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(32),i=n.n(r),s=n(2),c=n(3),u=n(5),o=n(4),d=n(17),h=n(6),m=n(7),p=n.n(m),v=(n(42),n(43),n(44),n(11)),E=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={email:"",password:"",validationMessage:""},e.handleInputChange=function(t){e.setState(Object(v.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),p.a.auth().setPersistence(p.a.auth.Auth.Persistence.LOCAL).then((function(){p.a.auth().signInWithEmailAndPassword(e.state.email,e.state.password).catch((function(t){return e.setState({validationMessage:t.message})}))}))},e}return Object(c.a)(n,[{key:"render",value:function(){return l.a.createElement("form",null,l.a.createElement("input",{type:"text",name:"email",placeholder:"Email",onChange:this.handleInputChange,value:this.state.email}),l.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:this.handleInputChange,value:this.state.password}),l.a.createElement("button",{onClick:this.handleSubmit},"Login"),l.a.createElement("p",null,this.state.validationMessage))}}]),n}(a.Component),b=n(21),f=n.n(b),g=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={email:"",password:"",passwordRepeat:"",validationMessage:""},e.db=f.a.firestore(),e.handleInputChange=function(t){var n;e.setState((n={},Object(v.a)(n,t.target.name,t.target.value),Object(v.a)(n,"validationMessage",""),n))},e.handleSubmit=function(t){t.preventDefault(),e.state.password===e.state.passwordRepeat?f.a.auth().setPersistence(f.a.auth.Auth.Persistence.LOCAL).then((function(){f.a.auth().createUserWithEmailAndPassword(e.state.email,e.state.password).then((function(t){e.db.collection("users").doc(t.user.uid).set({email:t.user.email})})).catch((function(t){e.setState({validationMessage:t.message})}))})):e.setState({validationMessage:"Your passwords do not match"})},e}return Object(c.a)(n,[{key:"render",value:function(){return l.a.createElement("form",null,l.a.createElement("input",{type:"text",name:"email",placeholder:"Email",onChange:this.handleInputChange,value:this.state.email}),l.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:this.handleInputChange,value:this.state.password}),l.a.createElement("input",{type:"password",name:"passwordRepeat",placeholder:"Repeat Password",onChange:this.handleInputChange,value:this.state.passwordRepeat}),l.a.createElement("button",{onClick:this.handleSubmit},"Signup"),l.a.createElement("p",null,this.state.validationMessage))}}]),n}(a.Component),k=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.firebaseListener=p.a.auth().onAuthStateChanged((function(t){t?e.props.history.push("/my"):e.props.history.push("/")}))}},{key:"componentWillUnmount",value:function(){this.firebaseListener&&this.firebaseListener(),this.firebaseListener=null}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(E,null),"- or -",l.a.createElement(g,null))}}]),n}(a.Component),y=n(19),C={brand:"",inkName:"",colorName:"",type:"",size:"",hue:"",props:"",dateAcquired:""},I=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state=C,e.handleInputChange=function(t){e.setState(Object(v.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.handleSubmit(e.state),e.setState(C)},e}return Object(c.a)(n,[{key:"render",value:function(){return l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"brand",placeholder:"Brand",onChange:this.handleInputChange,value:this.state.brand})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"inkName",placeholder:"Ink Name",onChange:this.handleInputChange,value:this.state.inkName})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"colorName",placeholder:"Color Name",onChange:this.handleInputChange,value:this.state.colorName})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"type",placeholder:"Type",onChange:this.handleInputChange,value:this.state.type})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"size",placeholder:"Size",onChange:this.handleInputChange,value:this.state.size})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"hue",placeholder:"Hue",onChange:this.handleInputChange,value:this.state.hue})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"props",placeholder:"Properties",onChange:this.handleInputChange,value:this.state.props})),l.a.createElement("div",null,l.a.createElement("input",{type:"date",name:"dateAcquired",placeholder:"Date Acquired",onChange:this.handleInputChange,value:this.state.dateAcquired})),l.a.createElement("button",{onClick:this.handleSubmit},"Add"))}}]),n}(a.Component),O=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"My Inks"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(I,{handleSubmit:this.props.handleSubmit})),l.a.createElement("li",null,l.a.createElement("div",null,"Brand"),l.a.createElement("div",null,"Ink Name"),l.a.createElement("div",null,"Color Name"),l.a.createElement("div",null,"Type"),l.a.createElement("div",null,"Size"),l.a.createElement("div",null,"Hue"),l.a.createElement("div",null,"Properties"),l.a.createElement("div",null,"Date Acquired")),this.props.inks.map((function(e){return l.a.createElement("li",{key:e.id},l.a.createElement("div",null,e.brand),l.a.createElement("div",null,e.inkName),l.a.createElement("div",null,e.colorName),l.a.createElement("div",null,e.type),l.a.createElement("div",null,e.size),l.a.createElement("div",null,e.hue),l.a.createElement("div",null,e.props),l.a.createElement("div",null,e.dateAcquired.seconds))}))))}}]),n}(a.Component),j={brand:"",model:"",finishName:"",nibType:"",nibSize:"",dateAcquired:""},S=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state=j,e.handleInputChange=function(t){e.setState(Object(v.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.handleSubmit(e.state),e.setState(j)},e}return Object(c.a)(n,[{key:"render",value:function(){return l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"brand",placeholder:"Brand",onChange:this.handleInputChange,value:this.state.brand})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"model",placeholder:"Model Name",onChange:this.handleInputChange,value:this.state.model})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"finishName",placeholder:"Finish Name",onChange:this.handleInputChange,value:this.state.finishName})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"nibType",placeholder:"Nib Type",onChange:this.handleInputChange,value:this.state.nibType})),l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"nibSize",placeholder:"Nib Size",onChange:this.handleInputChange,value:this.state.nibSize})),l.a.createElement("div",null,l.a.createElement("input",{type:"date",name:"dateAcquired",placeholder:"Date Acquired",onChange:this.handleInputChange,value:this.state.dateAcquired})),l.a.createElement("button",{onClick:this.handleSubmit},"Add"))}}]),n}(a.Component),P=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).checkPenInked=function(t){return e.props.inkedPens.find((function(e){return e.penId===t.id&&e.isActive}))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"My Pens"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(S,{handleSubmit:this.props.handleSubmit})),l.a.createElement("li",null,l.a.createElement("div",null,"Brand"),l.a.createElement("div",null,"Model"),l.a.createElement("div",null,"Finish Name"),l.a.createElement("div",null,"Nib Type"),l.a.createElement("div",null,"Nib Size"),l.a.createElement("div",null,"Date Acquired")),this.props.pens.map((function(t){var n=e.checkPenInked(t);return l.a.createElement("li",{key:t.id},l.a.createElement("div",null,t.brand),l.a.createElement("div",null,t.model),l.a.createElement("div",null,t.finishName),l.a.createElement("div",null,t.nibType),l.a.createElement("div",null,t.nibSize),l.a.createElement("div",null,t.dateAcquired.seconds),!n&&l.a.createElement("button",{onClick:function(){return e.props.handlePenInking(t)}},"Ink This Pen"),n&&l.a.createElement("button",{onClick:function(){return e.props.handlePenCleaning(n)}},"Clean This Pen"))}))))}}]),n}(a.Component),A=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={inkChoice:""},e.handleInkChange=function(t){e.setState({inkChoice:t.target.value})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props.pen,n=t.brand,a=t.model;return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,n," ",a),l.a.createElement("select",{onChange:this.handleInkChange,value:this.state.inkChoice},l.a.createElement("option",{value:""}),this.props.inks.map((function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.brand," ",e.inkName," ",e.colorName)}))),l.a.createElement("button",{onClick:function(){return e.props.handleInkChoice(e.props.pen.id,e.state.inkChoice)}},"Use This Ink"))}}]),n}(a.Component),w=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getCurrentlyInked=function(){return e.props.inkedPens.filter((function(e){return e.isActive}))},e.renderPen=function(t){var n=e.props.pens.find((function(e){return e.id===t}));return l.a.createElement(l.a.Fragment,null,n.brand," ",n.model," ",n.finishName)},e.renderInk=function(t){var n=e.props.inks.find((function(e){return e.id===t}));return l.a.createElement(l.a.Fragment,null,n.brand," ",n.inkName," ",n.colorName)},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.getCurrentlyInked();return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Inked Pens"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("div",null,"Pen"),l.a.createElement("div",null,"Ink"),l.a.createElement("div",null,"Inked Since")),t.map((function(t){return l.a.createElement("li",{key:t.id},l.a.createElement("div",null,e.renderPen(t.penId)),l.a.createElement("div",null,e.renderInk(t.inkId)),l.a.createElement("div",null,t.dateInked.seconds))}))))}}]),n}(a.Component),N=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={user:null,inks:[],pens:[],inkedPens:[],inkPen:null},e.db=p.a.firestore(),e.initUserPentry=function(t){e.setState({user:t},(function(){e.snapshotListeners=["inks","pens","inkedPens"].map((function(t){return e.db.collection("users").doc(e.state.user.uid).collection(t).onSnapshot((function(n){var a=[];n.forEach((function(e){return a.push(Object(y.a)({id:e.id},e.data()))})),e.setState(Object(v.a)({},t,a))}))}))}))},e.handleLogout=function(){p.a.auth().signOut()},e.handleInkSubmit=function(t){e.db.collection("users").doc(e.state.user.uid).collection("inks").add(Object(y.a)(Object(y.a)({},t),{},{dateAcquired:p.a.firestore.Timestamp.fromDate(new Date(t.dateAcquired)),addedTimestamp:p.a.firestore.FieldValue.serverTimestamp()}))},e.handlePenSubmit=function(t){e.db.collection("users").doc(e.state.user.uid).collection("pens").add(Object(y.a)(Object(y.a)({},t),{},{dateAcquired:p.a.firestore.Timestamp.fromDate(new Date(t.dateAcquired)),addedTimestamp:p.a.firestore.FieldValue.serverTimestamp()}))},e.handlePenInking=function(t){e.setState({inkPen:t})},e.handleInkChoice=function(t,n){e.db.collection("users").doc(e.state.user.uid).collection("inkedPens").add({penId:t,inkId:n,dateInked:p.a.firestore.FieldValue.serverTimestamp(),isActive:!0}).then((function(){return e.setState({inkPen:null})}))},e.handlePenCleaning=function(t){e.db.collection("users").doc(e.state.user.uid).collection("inkedPens").doc(t.id).update({isActive:!1,dateCleaned:p.a.firestore.FieldValue.serverTimestamp()})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.firebaseListener=p.a.auth().onAuthStateChanged((function(t){t?e.initUserPentry(t):e.props.history.push("/")}))}},{key:"componentWillUnmount",value:function(){this.firebaseListener&&this.firebaseListener(),this.firebaseListener=null,this.snapshotListeners&&this.snapshotListeners.map((function(e){return e()})),this.snapshotListeners=null}},{key:"render",value:function(){var e=this,t=this.props.match.path;return this.state.user?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Welcome,\xa0",l.a.createElement("strong",null,this.state.user.email),"\xa0 (",l.a.createElement(d.b,{to:"/",onClick:this.handleLogout},"logout"),")"),l.a.createElement(d.b,{to:"".concat(t)},l.a.createElement("h1",null,"Pentry")),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(d.b,{to:"".concat(t,"/inks")},"Inks")),l.a.createElement("li",null,l.a.createElement(d.b,{to:"".concat(t,"/pens")},"Pens"))),l.a.createElement(h.c,null,l.a.createElement(h.a,{path:"".concat(t),exact:!0,render:function(t){return l.a.createElement(w,Object.assign({inks:e.state.inks,pens:e.state.pens,inkedPens:e.state.inkedPens},t))}}),l.a.createElement(h.a,{path:"".concat(t,"/inks"),render:function(t){return l.a.createElement(O,Object.assign({inks:e.state.inks,handleSubmit:e.handleInkSubmit},t))}}),l.a.createElement(h.a,{path:"".concat(t,"/pens"),render:function(t){return l.a.createElement(P,Object.assign({pens:e.state.pens,inkedPens:e.state.inkedPens,handleSubmit:e.handlePenSubmit,handlePenInking:e.handlePenInking,handlePenCleaning:e.handlePenCleaning},t))}})),this.state.inkPen&&l.a.createElement(A,{pen:this.state.inkPen,inks:this.state.inks,handleInkChoice:this.handleInkChoice})):null}}]),n}(a.Component),L={apiKey:"AIzaSyA2jhn64ILvx4B9zL3ZNRLV9gh4I8Xeo24",authDomain:"pentry-3732e.firebaseapp.com",databaseURL:"https://pentry-3732e.firebaseio.com",projectId:"pentry-3732e",storageBucket:"pentry-3732e.appspot.com",messagingSenderId:"988072030575",appId:"1:988072030575:web:5b3bc8a425a47f0a33789a",measurementId:"G-6MKHZT1XNJ"},T=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(s.a)(this,n),e=t.call(this),!p.a.apps.length&&p.a.initializeApp(L),e}return Object(c.a)(n,[{key:"render",value:function(){return l.a.createElement(d.a,{basename:"/pentry/"},l.a.createElement(h.c,null,l.a.createElement(h.a,{path:"/",exact:!0,component:k}),l.a.createElement(h.a,{path:"/my",component:N})))}}]),n}(a.Component);i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(T,null)),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.128fa219.chunk.js.map